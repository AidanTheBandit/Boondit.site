---
import type { CollectionEntry } from "astro:content";
import FormattedDate from "@/components/Date.astro";
import Layout from "@/layouts/Layout.astro";

type Props = CollectionEntry<"blog">["data"];

const { title, pubDate, updatedDate, heroImage } = Astro.props;
---

<Layout>
  <div class="mt-24 md:mt-32 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mb-24 relative">
    <article class="relative z-10">
      <header class="mb-12 border-b border-border/50 pb-8">
        
        <div class="flex gap-1 h-2 mb-8 drop-shadow-sm w-24">
          <div class="flex-1 bg-[hsl(var(--color-pink))] rounded-sm"></div>
          <div class="flex-1 bg-[hsl(var(--color-purple))] rounded-sm"></div>
          <div class="flex-1 bg-[hsl(var(--color-gray))] rounded-sm"></div>
        </div>

        <div class="flex items-center gap-4 text-sm font-medium tracking-wide text-primary mb-6">
          <span class="inline-flex items-center bg-muted/50 px-3 py-1 rounded-full text-foreground">
            Blog Post
          </span>
          <div class="text-muted-foreground flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
            <FormattedDate date={pubDate} />
          </div>
          {updatedDate && (
            <div class="text-muted-foreground border-l border-border pl-4 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 21v-5h5"/></svg>
              <FormattedDate date={updatedDate} />
            </div>
          )}
        </div>
        
        <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight text-foreground leading-tight">
          {title}
        </h1>
      </header>

      {heroImage && (
        <figure class="mb-12 p-3 bg-card border border-border/50 shadow-xl rounded-2xl rotate-1 hover:rotate-0 transition-all duration-500">
          <div class="relative overflow-hidden group rounded-lg">
            <img
              src={heroImage}
              alt="hero-image"
              class="w-full h-auto object-cover grayscale-[0.2] hover:grayscale-0 transition-all duration-700 block"
            />
          </div>
        </figure>
      )}

      {/* Content wrapper with overridden prose for warm designer theme */}
      <div
        class="prose prose-zinc dark:prose-invert max-w-none 
        prose-headings:font-bold prose-headings:tracking-tight
        prose-h2:border-b prose-h2:border-border/30 prose-h2:pb-2 prose-h2:text-2xl mt-8
        prose-h3:text-xl prose-p:font-medium prose-p:leading-relaxed prose-p:text-muted-foreground 
        prose-a:text-primary prose-a:font-semibold hover:prose-a:text-accent
        prose-img:rounded-xl prose-img:border prose-img:border-border/50 prose-img:shadow-sm
        prose-hr:border-border/50
        prose-code:text-primary prose-code:bg-primary/10 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md prose-code:font-semibold
        prose-pre:bg-card/50 prose-pre:border prose-pre:border-border/50 prose-pre:rounded-xl"
      >
        <slot />
      </div>
    </article>
  </div>
</Layout>
